<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <form id="post_form">
        氏名<input type="text" name='your_name' value="氏名"><br>
        コメント<input type="text" name="comment" value="コメント"><br>
        <button id="button" type="button">送信</button>
    </form>

    <script>
        
        const url = 'http://coinbaby8.com/udemy_js_api/api/udemy_js';

        const option = {
            method: 'GET'
        };

        const getFormData = fetch(url,option)
        .then( response => response.json());
        console.log(getFormData);

        
        // console.log(formData);

        // for(let fd of formData.entries()){
        //     console.log(`${fd[0]}:${fd[1]}`);
        // }

        document.getElementById('button').addEventListener('click' , () => {
            const postForm = document.forms.postForm;
            const formData = new FormData(postForm);

            const url = 'http://coinbaby8.com/udemy_js_api/api/udemy_js';

            const option = {
                method: 'post',
                body:formData
            };

            fetch(url,option)
            .then(responce => {
                if(responce.ok){
                    return responce.json();
                }else{
                    return new Error();
                }
            })
            .then(text => console.log(text))
            .catch( error => console.log(error))

        });

        
    </script>
</body>
</html>